<!-- Delete Orca User Confirmation -->
<div class="p-6">
  <!-- Warning Header -->
  <div class="flex items-center gap-3 mb-6">
    <i class="pi pi-exclamation-triangle text-3xl text-orange-500"></i>
    <div>
      <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
        Confirmar eliminación
      </h3>
      <p class="text-gray-600 dark:text-gray-400 mt-1">
        Esta acción no se puede deshacer
      </p>
    </div>
  </div>

  <!-- User Information -->
  <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-6">
    <div class="space-y-3">
      <div class="flex justify-between items-start">
        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Usuario:</span>
        <div class="text-right">
          <p class="font-semibold text-gray-900 dark:text-white">{{ userFullName }}</p>
          <p class="text-sm text-gray-600 dark:text-gray-400">{{ user.email }}</p>
          <p class="text-xs text-gray-500 dark:text-gray-500">@{{ user.username }}</p>
        </div>
      </div>

      <div class="flex justify-between items-start">
        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Roles asignados:</span>
        <div class="text-right">
          @if (hasActiveRoles) {
            <p class="text-sm text-gray-900 dark:text-white">{{ activeRolesText }}</p>
          } @else {
            <p class="text-sm text-gray-500 dark:text-gray-500 italic">Sin roles asignados</p>
          }
        </div>
      </div>

      <div class="flex justify-between items-center">
        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Estado:</span>
        <span [class]="user.enabled ? 'text-green-600 bg-green-100 dark:bg-green-900 dark:text-green-400' : 'text-red-600 bg-red-100 dark:bg-red-900 dark:text-red-400'"
              class="px-2 py-1 text-xs font-medium rounded-full">
          {{ user.enabled ? 'Activo' : 'Inactivo' }}
        </span>
      </div>

      @if (user.lastLogin) {
        <div class="flex justify-between items-center">
          <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Último acceso:</span>
          <span class="text-sm text-gray-600 dark:text-gray-400">
            {{ user.lastLogin | date:'dd/MM/yyyy HH:mm' }}
          </span>
        </div>
      }
    </div>
  </div>

  <!-- Warning Messages -->
  <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6">
    <div class="flex gap-3">
      <i class="pi pi-exclamation-circle text-red-500 mt-0.5"></i>
      <div class="space-y-2">
        <p class="text-sm font-medium text-red-800 dark:text-red-200">
          ⚠️ Advertencias importantes:
        </p>
        <ul class="text-sm text-red-700 dark:text-red-300 space-y-1 pl-4 list-disc">
          <li>El usuario será eliminado permanentemente del sistema</li>
          <li>Se perderán todos sus datos y configuraciones</li>
          @if (hasActiveRoles) {
            <li>Se removerán automáticamente todos sus roles asignados</li>
          }
          <li>Esta acción no se puede deshacer</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Confirmation Text -->
  <div class="mb-6">
    <p class="text-gray-700 dark:text-gray-300">
      ¿Estás seguro de que deseas eliminar permanentemente el usuario 
      <strong class="font-semibold text-gray-900 dark:text-white">{{ userFullName }}</strong>?
    </p>
  </div>

  <!-- Action Buttons -->
  <div class="flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700">
    <p-button 
      label="Cancelar" 
      severity="secondary" 
      (click)="onCancel()" 
      [disabled]="isLoading()">
    </p-button>

    <p-button
      label="Sí, eliminar usuario"
      severity="danger"
      (click)="onConfirmDelete()"
      [loading]="isLoading()"
      [disabled]="isLoading()"
      icon="pi pi-trash">
    </p-button>
  </div>
</div>